name: test

on:
  - push

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  TZ: Asia/Tokyo

jobs:
  test:
    strategy:
      fail-fast: false
      matrix:
        runner:
          - macos-14
          - macos-15
          - macos-26
          - ubuntu-22.04
          - ubuntu-24.04
          - windows-2022
          - windows-2025
    runs-on: ${{ matrix.runner }}
    timeout-minutes: 5
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@93cb6efe18208431cddfb8368fd83d5badbf9bfd # v5.0.1
      - id: os-info
        uses: ./
      - run: test -n '${{ steps.os-info.outputs.version }}'
